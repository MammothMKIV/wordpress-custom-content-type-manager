#summary GetPostsQuery class reference
#labels Function-Reference,Technical
#sidebar SidebarFunctionReference

<wiki:toc max_depth="2" />

= Introduction =

A class for querying !WordPress posts (including pages or custom post-types), including all custom fields via a unified API.  This class was written to overcome limitations in `WP_Query`, `query_posts`, and other built-in !WordPress methods.

|| http://s2.postimage.org/by3ngezo/warning_icon.png || The most important function here is [get_posts].  See its dedicated page as well as the page with [get_posts_examples Examples of get_posts()]. ||

----

= Methods =

=== <font color="green">public function get_posts()</font>===

_array_ *get_posts*(array _$args_ `[`,$ignore_defaults`]`)

 * *$args* : array of filter criteria.  See [get_posts] for details.
 * *$ignore_defaults* : boolean
 * *OUTPUT*: A record set (an array of arrays). Each post returned is an associative array.  

The keys in each record are dependent on the records being returned.  At a minimum, the record will contain the following:

 * Keys for all built-in !WordPress columns in the `wp_posts` table (`post_content`, `comment_status`, etc.)
 * Keys for all custom fields present in _any_ of the results.  E.g. if one record has a custom field named "color" and another record has a custom field for "size", then all records in the result set will have array keys for both "size" and "color"

Additionally, get_posts adds the following convenience keys:

 * author : the username of the author (not just the integer `post_author`)
 * thumbnail_id : the attachment id of the "featured image" (if present). Same as `_thumbnail_id`
 * thumbnail_src : the URL src of the "featured image" (if present)
 * permalink : contains the full URL to the post
 * parent_ID : the post ID of the parent post (if available)
 * parent_permalink : contains the full URL of the post's parent (if available)
 * parent_title : post_title from the parent post (if available)
 * parent_excerpt : post_excerpt from the parent post (if available)
 * post_id : an alias of ID (but easier to remember)


=== <font color="green">public function get_post()</font>===

_array_ *get_post*(integer _$id_)

 * *$id* : integer post id of the post you with to retrieve
 * *OUTPUT*: An associative array: each field is a key in the array.

Do not confuse this with the `get_posts()` function!  


=== <font color="green">public function count_posts()</font>===

_integer_ *count_posts*(array _$args_ `[`,$ignore_defaults`]`)

 * *$args* : criteria, inputs the same as for `get_posts()`.
 * *OUTPUT*: Integer count of the number of rows meeting the criteria.

=== <font color="green">public function debug()</font>===

_string_ *debug*()

 * *OUTPUT*: retrieves debugging information about the query you issued.  

You should run this after you have run this class' `get_posts()` function.  Optionally, you can pass arguments to the constructor and then call this method.

=== <font color="green">public function get_args()</font>===

Returns an HTML formatted version of filtered input arguments useful for debugging.

----

IN PROGRESS...

 * get_args Returns an HTML formatted version of filtered input arguments useful for debugging.
 * get_current_page_url: Gets the URL of the current page to use in generating pagination links.
 * get_duration: Gets script execution time (since instantiation) for debugging purposes
 * get_errors: Format any errors in an unordered list, or returns a message saying there were no errors.
 * get_found_rows: Gets the # of rows found given the criteria.  Must be run after get_posts 
 * get_notices: Format any errors in an unordered list, or returns a message saying there were no errors.
 * get_pagination_links: tie into the [CCTM_Pagination] class. Only valid if the pagination option has been set.  This is how the user should retrieve the pagination links that have been generated.
 * get_post: returns a single post by its id.  The returned array includes all custom fields.
 * get_shortcode: gets the equivalent shortcode for the query defined by the arguments.
 * get_sql: get the raw SQL query
 * get_warnings: like get_notices and get_warnings.
 * set_default: This sets a default value for any field.  This should kick in only if the field is empty.
 * set_defaults: 
 * set_include_hidden_fields: Should hidden fields be included in the results?
 * set_tpls: Passthru to pagination library's function of the same name.