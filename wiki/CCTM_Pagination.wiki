#summary CCTM_Pagination class reference
#labels Function-Reference,Technical
#sidebar SidebarFunctionReference

= Introduction =

The CCTM_Pagination class is a library for generating pagination links in conjunction with the GetPostsQuery class.  You can see the results of this library when you pop up a  modal lightbox for a relation or image field: the pagination links at the bottom of those pages are generated using this class.

https://www.evernote.com/shard/s17/sh/26a5a8c3-338d-49cb-bc79-8f59d02cd8ae/ac2088472b7df370ce74de369884c80b/res/cd4a78fb-7321-4985-afcb-d3ef7860dbd4/skitch.png?resizeSmall&width=832&appease=img.png

Pagination links are generated by assembling together a series of formatting strings (a.k.a templates or "tpls" for short).



= Usage =

IN PROGRESS...

{{{
<?php

// in your template file...

$tpls['firstTpl'] = '';
$tpls['lastTpl'] = '';
$tpls['prevTpl'] = '';
$tpls['nextTpl'] = '';
$tpls['currentPageTpl'] = '';
$tpls['pageTpl'] = '';
$tpls['outerTpl'] = '';


Example of Generated Links:

			<< First < Prev.  1 2 3 4 5  Next >  Last >>

Keys define which parameter to look for in the URL.
number_of_pagination_links_displayed controls whether you have something like
<<prev 1 2 3 next>> or 1 2 3 4 5 6 ... 

	Templates used for formatting are assembled in the following manner:
	
	E.g. if the current page is 3:
	
	<<First <<Prev 1 2 3 Next>> Last>>
	\_____/ \____/ ^ ^ ^ \____/ \____/
	   |       |   | | |    |      +----- lastTpl
	   |       |   | | |    +------------ nextTpl
	   |       |   | | +----------------- currentPageTpl
	   |       |   +-+------------------- pageTpl
	   |       +------------------------- prevTpl
	   +--------------------------------- firstTpl

\_________________________________________________/
                    |
                    +-------------------- outerTpl
}}}

= Arguments =

It's important to review the arguments to the CCTM's [get_posts] function: some of those arguments directly affect pagination.

= Formatting Templates (tpls) =

== firstTpl == 

Used to format the link that takes you back to the very first page of results.

== lastTpl ==

== prevTpl ==

== nextTpl ==

== currentPageTpl ==

== pageTpl ==

== outerTpl ==

= Example 1 =

This example creates a simple link for "Older posts" -- it uses only a small portion of the available formatting templates.

{{{
// Define the query
$args = array();
$args['post_type'] = array('my_post_type');
$args['search_columns'] = array('post_title', 'post_content','some_custom_field');
//$args['taxonomy'] = 'category';
//$args['taxonomy_slug'] = '';
$args['orderby'] = 'post_date';
$args['date_format'] = 'F j, Y';
$args['limit'] = 20;
$args['paginate'] = true;

// Read the offset variable (VERY IMPORTANT!)
if (isset($_GET['offset'])) {
	$args['offset'] = (int) $_GET['offset'];
}


// Pagination formatting
$tpls = array();
$tpls['prevTpl'] = '<div class="nav-next"><a href="[+base_url+]&[+offset_key+]=[+offset+]" [+extra+]>Newer posts <span class="meta-nav">&rarr;</span></a></div>';
$tpls['nextTpl'] = '<div class="nav-previous"><a href="[+base_url+]&[+offset_key+]=[+offset+]" [+extra+]><span class="meta-nav">&larr;</span> Older posts</a></div>';
$tpls['outerTpl'] = '<div id="nav-below" class="navigation">[+content+]</div>';
$Q->set_tpls($tpls);

$results = $Q->get_posts($args);

foreach ($results as $r) {
    // print out a bit about each post in the result set... 
}

print $Q->get_pagination_links();

}}}